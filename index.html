<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RootDonate Live X Vibes • Carrick Era @ MUFC with Geotagged Posts</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    #result { margin-top: 20px; padding: 15px; background: #1a1a1a; border-radius: 8px; white-space: pre-wrap; }
    button { padding: 10px 20px; background: #1d9bf0; border: none; color: white; border-radius: 9999px; cursor: pointer; }
    button:hover { background: #1a8cd8; }
    body, html { margin:0; height:100%; background:#000; color:#fff; font-family:system-ui,sans-serif; overflow:auto; }
    #map-container { position:relative; height:80vh; }
    #map { height:100%; }
    .header { position:absolute; top:12px; left:0; right:0; text-align:center; pointer-events:none; z-index:1000; }
    h1 { font-size:2.8rem; font-weight:900; letter-spacing:-1px; background:linear-gradient(90deg,#0af,#0f5,#f90); -webkit-background-clip:text; background-clip:text; color:transparent; }
    footer { position:absolute; bottom:0; left:0; right:0; padding:10px; background:rgba(0,0,0,0.8); text-align:center; font-size:0.9rem; z-index:1000; }
    input { margin: 5px; padding: 8px; border-radius: 4px; border: 1px solid #333; background: #222; color: #fff; }
    label { pointer-events: all; }
  </style>
</head>
<body>
  <div id="map-container">
    <div id="map"></div>
    <div class="header" style="pointer-events: all;">
      <h1>RootDonate</h1>
    </div>
    <footer>
      <span id="status">Jan 14 2026 ~23:00 GMT • @iandreme (Swagga Rico)</span>
    </footer>
  </div>

  <div id="result"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // ── Map Setup ── Carrington focus
    const map = L.map('map').setView([53.4631, -2.2913], 10);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '© OpenStreetMap & CARTO'
    }).addTo(map);

    // Your marker
    const youIcon = L.divIcon({
      html: '<div style="width:56px;height:56px;border-radius:50%;overflow:hidden;border:3px solid #0af;box-shadow:0 0 12px #0af"><img src="https://pbs.twimg.com/profile_images/1452130026212765700/q9iBQMu8_400x400.jpg" style="width:100%;height:100%;object-fit:cover"></div>',
      iconSize: [56, 56], iconAnchor: [28, 28], className: ''
    });

    // X marker
    const xIcon = L.divIcon({
      html: '<div style="background:#000;border:2px solid #1da1f2;border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;color:#1da1f2;font-weight:bold">X</div>',
      iconSize: [44, 44], iconAnchor: [22, 22], className: ''
    });

    function showYou(lat, lng) {
      if (youMarker) youMarker.remove();
      youMarker = L.marker([lat, lng], {icon: youIcon}).addTo(map)
        .bindPopup("You • @iandreme • Swagga Rico", {autoClose: false}).openPopup();
      map.flyTo([lat, lng], 13, {duration: 1.5});
    }

    // Your geo or fallback to Carrington
    navigator.geolocation.getCurrentPosition(
      pos => showYou(pos.coords.latitude, pos.coords.longitude),
      () => showYou(53.4631, -2.2913)
    );

    setTimeout(() => loadVibes(), 1200);
  </script>
</body>
</html>